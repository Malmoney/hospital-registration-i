<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>预约挂号</title>
</head>
<body>

<div></div>
<div id="departmentInfo">
    <div style=" width:100px;height:20px;">
        <span style="font-size: 20px;"><b>选择科室：</b></span>
    </div>
    <br>
</div>
<div id="hospitalRecommendInfo">
    <div style=" width:100px;height:20px;margin-top: 50px">
        <span style="font-size: 20px;"><b>推荐医院：</b></span>
        <div>根据城市选择:
            <select name="city" id="query_city">
                <option value="0">--请选择--</option>
                <option selected value="太原">太原</option>
                <option value="长治">长治</option>
            </select>
        </div>
    </div>
    <div class="hospitalItem" data-id="">
        <img src="" alt="">

    </div>
</div>

</body>
<script src="/system/js/jquery-1.9.1.js"></script>
<script>
    $(function () {

        $("#query_city").change(function () {
            initHospitalInfo();
        });

        $.ajax({
            url:"/system/server/user/getUserInfo",
            type:"post",
            success:function (data) {
                if (data.rspData == null){
                    window.location.href="/system/userInfo.html";
                }else{
                    init();
                }
            }
        });

    });
    function init(){
        initDepartmentInfo();
        initHospitalInfo();
    }
    function initDepartmentInfo() {
        $.ajax({
            url:"/system/server/department/selectAllDepartment",
            type:"post",
            success:function (data) {
                if (data.rspData != null){
                    let departmentInfos=data.rspData;
                    for (var i =0;i<departmentInfos.length;i++){

                        $("#departmentInfo").append(`<div class="departmentItem" data-id="`+departmentInfos[i].departmentId+`">`+departmentInfos[i].departmentName+`</div>`);
                    }
                }
            }
        });
    }
    function initHospitalInfo() {
        let selectHospitalReq={
            city:$('#query_city').val()
        }

        $.ajax({
            url:"/system/server/hospital/selectHospital",
            type:"post",
            data: selectHospitalReq,
            success:function (data) {
                if (data.rspData != null){
                    let hospitalInfos=data.rspData;
                    for (var i =0;i<hospitalInfos.length;i++){
                        $("#hospitalRecommendInfo").append(`    <div class="hospitalItem" data-id="`+hospitalInfos[i].hospitalId+`">
                                                            <img src="" alt="">
`+hospitalInfos[i].hospitalName+`
                                                        </div>`);
                    }
                }
            }
        });
    }
</script>
<style>
    .departmentItem{
        width: 50px;
        height: 30px;
        line-height: 30px;
        text-align: center;
        margin-left: 20px;
        background-color: aqua;
        float: left;
    }

    .departmentItem:hover{
        transform:scale(1.2);
    }

</style>
</html>